!function(e,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o();else if("function"==typeof define&&define.amd)define([],o);else{var t=o();for(var i in t)("object"==typeof exports?exports:e)[i]=t[i]}}(self,(function(){return(()=>{"use strict";var e={332:function(e,o){var t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var o,t=1,i=arguments.length;t<i;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var i,n,r,s={username:"crm01",password:"crm01"};!function(e){e.ENTER="/eventTracking/getUserAccessBehaviors",e.LEAVE="/eventTracking/getPageLeaveAction",e.SCROLL="/eventTracking/getUserSlipperAction",e.CLICK="/eventTracking/getUserClickAction"}(i||(i={})),function(e){e[e.axios=1]="axios"}(n||(n={})),function(e){e.DEVELOPMENT="development",e.PRODUCTION="production"}(r||(r={}));var d,a,c=function(e,o,i){e.post(o,t(t({},s),{jsonString:JSON.stringify(i)}))},l={enter:function(){},leave:function(){},click:function(e,o){},scroll:function(e){}},u=function(){function e(o){this._id=Date.now().toString(),this._enterTime=new Date,this.url=window.location.href,e.deep++,this._pageInfo=t({},o),this._enter(),this._bindListeners()}return e.prototype._bindListeners=function(){l.enter=this._enter.bind(this),l.leave=this.leave.bind(this),l.click=this.click.bind(this),l.scroll=this.scroll.bind(this)},e.prototype._getPageCode=function(){var e,o,t,i;return"nodeId"+(null!==(e=this._pageInfo.nodeId)&&void 0!==e?e:"")+".pageId"+(null!==(o=this._pageInfo.pageId)&&void 0!==o?o:"")+".moudldId"+(null!==(t=this._pageInfo.moduleId)&&void 0!==t?t:"")+".activityId"+(null!==(i=this._pageInfo.activityId)&&void 0!==i?i:"")},e.prototype._enter=function(){var o={user:{appname:e.appName,sysSource:e.sysSource,deviceOS:e.deviceOS,customerId:e.customerId,nickName:e.nickName,shopId:e.shopId},eventPage:{accessTime:this._enterTime.getTime(),pvId:this._id,pageCode:this._getPageCode(),pageType:this._pageInfo.pageType,version:this._pageInfo.version,versionName:this._pageInfo.versionName,accessReferer:document.referrer,deep:e.deep,accessId:e.accessId,url:this.url}};console.log("report enter:",o),c(e.request,i.ENTER,o)},e.prototype.click=function(o,t){var n,r,s,d,a,l,u,p={user:{customerId:e.customerId,appname:e.appName,nickname:e.nickName,shopId:e.shopId,deviceOS:e.deviceOS,sysSource:e.sysSource},eventClick:{createTime:Date.now(),pvId:this._id,pageCode:this._getPageCode(),click:"storeyId"+(null!==(r=null===(n=null==t?void 0:t.floorInfo)||void 0===n?void 0:n.id)&&void 0!==r?r:"")+".storeyType"+(null!==(d=null===(s=null==t?void 0:t.floorInfo)||void 0===s?void 0:s.type)&&void 0!==d?d:"")+".elementId"+(null!==(a=null==t?void 0:t.elementId)&&void 0!==a?a:"")+".isMainElement"+((null==t?void 0:t.isMain)?1:0),position:null!==(u=null===(l=null==t?void 0:t.floorInfo)||void 0===l?void 0:l.order)&&void 0!==u?u:"",content:"",version:this._pageInfo.version,versionName:this._pageInfo.versionName,resolvingPower:e.resolvingPower,xCoordinate:o.changedTouches[0].pageX,yCoordinate:o.changedTouches[0].pageY}};console.log("report click:",p),c(e.request,i.CLICK,p)},e.prototype.scroll=function(o){var t={user:{customerId:e.customerId,nickname:e.nickName,appname:e.appName,shopId:e.shopId,deviceOS:e.deviceOS},eventSlide:{createTime:Date.now(),pvId:this._id,pageCode:this._getPageCode(),version:this._pageInfo.version,versionName:this._pageInfo.versionName,scrollTop:o.scrollTop}};console.log("report scroll:",t),c(e.request,i.SCROLL,t)},e.prototype.leave=function(){this._leaveTime=new Date;var o={user:{customerId:e.customerId,appname:e.appName,shopId:e.shopId},eventLeave:{accessTime:this._enterTime.getTime(),pvId:this._id,pageCode:this._getPageCode(),leaveTime:this._leaveTime.getTime()}};console.log("report leave:",o),c(e.request,i.LEAVE,o)},e.inited=!1,e.deep=0,e.resolvingPower=window.screen.availWidth+"*"+window.screen.availHeight,e}(),p=function(e){(null==d?void 0:d.url)!==window.location.href&&(d=new u(e))};o.default={install:function(e,o){var i,n=(void 0===o.env&&r.DEVELOPMENT,o.scrollOnBody),s=o.axios,d=o.sys,c=(o.shopId,o.customerId,o.nickName,o.appName);u.request=s.create({baseURL:(r.PRODUCTION,"https://et.dianpusoft.cn")}),u.appName=c,u.sysSource=d,u.deviceOS=(i=navigator.userAgent).match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?"ios":i.indexOf("Android")>-1||i.indexOf("Adr")>-1?"android":"other",e.mixin({beforeRouteEnter:function(e,o,i){var n,r,s=t(t({},e.query),e.params);console.log("to:",e);var d=t(t({},e.meta),{activityId:null!==(n=s.activityId)&&void 0!==n?n:"",moduleId:null!==(r=s.tplId)&&void 0!==r?r:""});i((function(){u.inited?p(d):a=d}))},beforeRouteLeave:function(e,o,t){l.leave(),t()}}),window.onbeforeunload=l.leave,e.directive("lz-floor",{bind:function(e,o){var t,i;e.setAttribute("data-floor-id",null!==(t=o.value.id)&&void 0!==t?t:""),e.setAttribute("data-floor-type",null!==(i=o.value.type)&&void 0!==i?i:""),e.setAttribute("data-floor-order",""+o.value.order)}}),e.directive("lz-click",{bind:function(e,o){e.addEventListener("touchend",(function(t){var i={id:e.getAttribute("data-floor-id"),type:e.getAttribute("data-floor-type"),order:e.getAttribute("data-floor-order")};l.click(t,{elementId:o.value,isMain:o.modifiers.isMain,floorInfo:i})}),!0)}});var v=-1,f=function(e){-1!==v&&clearTimeout(v),v=setTimeout((function(){l.scroll(e)}),300)};n?document.body.addEventListener("scroll",(function(){return f(document.body)}),!0):document.body.addEventListener("scroll",(function(e){console.log(e.target)}),!0),e.directive("lz-scroll",{bind:function(e){n||e.addEventListener("scroll",(function(){return f(e)}),!0)}})},setBaseInfo:function(e){u.customerId=e.customerId,u.shopId=e.shopId,u.nickName=e.shopId,u.accessId=""+e.customerId+Date.now(),u.inited=!0,!d&&a&&p(a)}}}},o={};return function t(i){if(o[i])return o[i].exports;var n=o[i]={exports:{}};return e[i].call(n.exports,n,n.exports,t),n.exports}(332)})()}));