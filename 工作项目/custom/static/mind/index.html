<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>京东组织架构图</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Cache-control" content="no-store">
  <meta name="viewport" content="width=device-width">
  <!--  <script src="https://res2.wx.qq.com/open/js/jweixin-1.6.0.js "></script>-->
  <script src="https://wq.360buyimg.com/js/common/dest/wq.wxapi.core.8d12715068.js"></script>
  <script src="https://apps.bdimg.com/libs/jquery/1.6.4/jquery.js"></script>
  <script src='https://cdn.bootcdn.net/ajax/libs/vConsole/3.7.0/vconsole.min.js'></script>
</head>
<body>

<button class='chooseImage' type="button" >上传图片</button>
<button class='hideMenuItems' type="button" >隐藏菜单</button>

<script type="text/javascript">
  if (window.VConsole && window.location.href.split('?')[1]?.includes('debug')) {
    const vc = new window.VConsole();
  }
  // $.ajax({
  //   data: {
  //     url: location.href
  //   },
  //   type: "GET",
  //   url: "/wxActionCommon/signature",
  //   success: function(data) {
  //     if (data.result) {
  //       console.log(data.data);
  //       wx.config({
  //         debug: false,
  //         appId: data.data.appid,
  //         timestamp: data.data.timestamp,
  //         nonceStr: data.data.nonceStr,
  //         signature: data.data.signature,
  //         jsApiList: [
  //           'updateAppMessageShareData',
  //           'updateTimelineShareData',
  //           'chooseImage',
  //           'hideMenuItems'
  //         ]
  //       });
  //       wx.ready(function() {
  //         wx.checkJsApi({
  //           jsApiList: [
  //             'updateAppMessageShareData',
  //             'updateTimelineShareData',
  //             'chooseImage',
  //             'hideMenuItems'
  //           ],
  //           success: function (res){
  //             console.log('checkJsApi', res);
  //           }
  //         });
  //
  //         wx.updateAppMessageShareData({
  //           title:  "分享给朋友", // 分享标题
  //           desc:'测试分享',
  //           link: location.href , // 分享链接，该链接域名必须与当前企业的可信域名一致
  //           imgUrl: "https://img10.360buyimg.com/imgzone/jfs/t1/209028/5/11912/481/61b15b10Ea7bc0c8e/b8d2ea73ce9ba87b.png", // 分享图标
  //           success: function(res) {
  //             alert('wx.updateAppMessageShareData:success: ' + JSON.stringify(res));
  //           },
  //           cancel: function(res) {
  //             alert('wx.updateAppMessageShareData:cancel: ' + JSON.stringify(res));
  //           },
  //           fail: function(res) {
  //             alert('wx.updateAppMessageShareData:fail: ' + JSON.stringify(res));
  //           }
  //         });
  //         wx.updateTimelineShareData({
  //           title:  "分享到朋友圈", // 分享标题
  //           link: location.href , // 分享链接，该链接域名必须与当前企业的可信域名一致
  //           imgUrl: "https://img10.360buyimg.com/imgzone/jfs/t1/209028/5/11912/481/61b15b10Ea7bc0c8e/b8d2ea73ce9ba87b.png", // 分享图标
  //           success: function(res) {
  //             alert('wx.updateTimelineShareData:success: ' + JSON.stringify(res));
  //           },
  //           cancel: function(res) {
  //             alert('wx.updateTimelineShareData:cancel: ' + JSON.stringify(res));
  //           },
  //           fail: function(res) {
  //             alert('wx.updateTimelineShareData:fail: ' + JSON.stringify(res));
  //           }
  //         });
  //       })
  //     }
  //   }
  // });
  // $('.chooseImage').click(function (){
  //   wx.chooseImage({
  //     count: 1, // 默认9
  //     sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有
  //     sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有
  //     success: function (res) {
  //       var localIds = res.localIds; // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片
  //       console.log(res);
  //     }
  //   });
  // })
  // $('.hideMenuItems').click(function (){
  //   wx.hideMenuItems({
  //     menuList: ["menuItem:share:qq","menuItem:editTag","menuItem:copyUrl","menuItem:favorite","menuItem:share:QZone"] // 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮，所有menu项见附录3
  //   });
  // })
  JD.wxapi.ready(function(){
    console.log(JD, wx);
    $('.chooseImage').click(function (){
      wx.chooseImage({
        count: 1, // 默认9
        sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有
        sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有
        success: function (res) {
          var localIds = res.localIds; // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片
          console.log(res);
        }
      });
    })
    wx.onMenuShareAppMessage({
      title:  "分享给朋友", // 分享标题
      desc:'测试分享',
      link: location.href , // 分享链接，该链接域名必须与当前企业的可信域名一致
      imgUrl: "https://img10.360buyimg.com/imgzone/jfs/t1/209028/5/11912/481/61b15b10Ea7bc0c8e/b8d2ea73ce9ba87b.png", // 分享图标
      success: function(res) {
        alert('wx.updateAppMessageShareData:success: ' + JSON.stringify(res));
      },
      cancel: function(res) {
        alert('wx.updateAppMessageShareData:cancel: ' + JSON.stringify(res));
      },
      fail: function(res) {
        alert('wx.updateAppMessageShareData:fail: ' + JSON.stringify(res));
      }
    });
  })
</script>

</body>
</html>
